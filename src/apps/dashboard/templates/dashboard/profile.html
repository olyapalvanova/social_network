{% extends 'dashboard/base.html' %}
{% load static %}

{% load thumbnail %}

{% block body %}

{% if account.id != user.id %}
{% if account.is_private %}
    <main role="main">
     <hr class="featurette-divider">
    <div class="row featurette">
      <div class="col-md-5">
          {% if account.image %}
          <img src="{{ account.image.avatar.url }}" class="rounded float-left" alt="Responsive image"/>
           {% endif %}
      </div>
      <div class="col-md-7">
        <h2 class="featurette-heading">{{ account.first_name }} {{ account.last_name }}</h2>
          <h3>Status: {{ account.status }}</h3>
          <h3>Birth of date: {{ account.birth_date }}</h3>
          <h3>City: {{ account.city }}</h3>
      </div>
    </div>
{% else %}
   <main role="main">
     <hr class="featurette-divider">
    <div class="row featurette">
      <div class="col-md-5">
          {% if account.image %}
          <img width="500" height="500" src="{{ account.image.url }}" class="rounded float-left" alt="Responsive image" width="100%" height="100%">
           {% else %}
              <img width="500" height="500" src="/media/avatars/unnamed.png" class="rounded float-left" alt="Responsive image" width="100%" height="100%">
      {% endif %}
      </div>
      <div class="col-md-7">
        <h2 class="featurette-heading">{{ account.first_name }} {{ account.last_name }}</h2>
          <h3>Status: {{ account.status }}</h3>
          <h3>Birth of date: {{ account.birth_date|date:'Y-m-d'|default:'-' }}</h3>
          <h3>City: {{ account.city }}</h3>
          <h3>School: {{ account.school }}</h3>
          <h3>Work: {{ account.work|default:'-' }}</h3>
          <h3>Description: {{ account.description }}</h3>
          <h3>Music: {{ account.music }}</h3>
          <h3>Books: {{ account.books }}</h3>
          <h3>Interests: {{ account.interests }}</h3>
          <h3>Private account: {{ account.is_private }}</h3>
      </div>
    </div>
{% endif %}
    {% else %}
       <main role="main">
     <hr class="featurette-divider">
    <div class="row featurette">
      <div class="col-md-5">
          {% if account.image %}
          <img width="500" height="500" src="{{ account.image.url }}" class="rounded float-left" alt="Responsive image" width="100%" height="100%">
           {% else %}
              <img width="500" height="500" src="/media/avatars/unnamed.png" class="rounded float-left" alt="Responsive image" width="100%" height="100%">
      {% endif %}
      </div>
      <div class="col-md-7">
        <h2 class="featurette-heading">{{ account.first_name }} {{ account.last_name }}</h2>
          <h3>Status: {{ account.status }}</h3>
          <h3>Birth of date: {{ account.birth_date|date:'Y-m-d'|default:'-' }}</h3>
          <h3>City: {{ account.city }}</h3>
          <h3>School: {{ account.school }}</h3>
          <h3>Work: {{ account.work|default:'-' }}</h3>
          <h3>Description: {{ account.description }}</h3>
          <h3>Music: {{ account.music }}</h3>
          <h3>Books: {{ account.books }}</h3>
          <h3>Interests: {{ account.interests }}</h3>
          <h3>Private account: {{ account.is_private }}</h3>
      </div>
    </div>
{% endif %}

    <div class="jumbotron">
    <div class="container">
        {% if account.id == user.id %}
        <h1 class="display-3"><a href="/users/{{ account.id }}/posts/" style="color:#000000; text-decoration:none">Show my posts!</a></h1>
         {% else %}
         {% if not account.is_friend %}
            <p><a class="btn btn-secondary" href="{% url 'dashboard:friend_add' account.id %}" role="button">Add friend &raquo;</a></p>
         {% else %}
             <p><a class="btn btn-secondary" href="{% url 'dashboard:friend_delete' account.id %}" role="button">Delete </a></p>
        {% endif %}
    {% endif %}
    </div>
  </div>


  <div class="album py-5 bg-light">
    <div class="container">
    {% if account.id == user.id %}
          {% for friend in friends %}
              {% for u in friend.users.all %}
                  {% if u.id != request.user.id %}
        <div class="col-md-4">
          <div class="card mb-4 shadow-sm">
              <img width="100" height="100" src="{% get_media_prefix %}{{ u.image|default:"/avatars/unnamed.png" }}" class="rounded float-left" alt="Responsive image">
            <div class="card-body">
              <p class="card-text">{{ u }}</p>
              <div class="d-flex justify-content-between align-items-center">
                <div class="btn-group">
                    <button type="button" class="btn btn-sm btn-outline-secondary"><a href="{% url 'dashboard:friend_dialog' u.id %}" style="color:#000000; text-decoration:none">Write...</a></button>
                    <button type="button" class="btn btn-sm btn-outline-secondary"><a href="{% url 'dashboard:profile' u.id %}" style="color:#000000; text-decoration:none">More...</a></button>
                </div>
                <small class="text-muted">online</small>
              </div>
            </div>
          </div>
        </div>
            {% endif %}
          {% endfor %}
          {% endfor %}
    {% endif %}
</main>
</main>
{% endblock %}